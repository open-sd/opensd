<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Steam Deck Hardware Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Steam Deck Hardware Documentation</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Steam Deck is a fairly open platform which utilizes an x86-64 processor and functions much like a typical desktop system might.  The overall architecture is pretty standard for internal busses, storage, memory, GPU, etc.   It&#8217;s designed to run a fork of Arch Linux, but pretty much any x86-based OS should be able to run on it to some degree.  In the case of Linux, it&#8217;s mostly dependent on the upstream kernel and mesa.  There are a few hardware quirks as well as some portions of the hardware which rely on the Steam client to provide userspace access to, chiefly the input devices.</p>
</div>
<div class="paragraph">
<p>It&#8217;s not the goal of this document to go into detail about hardware aspects that are already well know and supported, but rather cover some of the gaps that might be interesting or important to someone who wants to use the hardware in "unintended ways" that don&#8217;t involve Steam or SteamOS.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_disclaimer">Disclaimer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I have no affiliation with Valve.  All the information here has been obtained through reverse engineering or published openly elsewhere.</p>
</div>
<div class="paragraph">
<p>The following are notes which I&#8217;ve made in the process of installing my own clean OS environment, tinkering, and developing <a href="https://gitlab.com/open-sd/opensd">OpenSD</a>.  <strong>I make no guarantee of the accuracy of any information in this document.</strong>  There may also be hardware revisions that I&#8217;m not aware of, as well as possible future hardware revisions.  This is just some stuff I&#8217;ve gleaned from my own experience playing with my own Steam Deck.</p>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_processor">Processor</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">AMD Zen 2 0405 (semi-custom Van Gogh) APU</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>CPU: x86_64, 4 Physical Cores, 8 Threads</p>
</li>
<li>
<p>GPU: 8 RDNA2 Compute Units</p>
</li>
<li>
<p>RAM: SMA, 16GB LPDDR5</p>
</li>
<li>
<p>~4-15W TPD</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Valve states the CPU clocks between 2.4 and 3.5GHz, but I&#8217;ve observed the CPU clock as low as 1.2GHz.  While it&#8217;s possible that it&#8217;s an incorrect reading from the governer, it&#8217;s more likely that Valve only measured clock speeds while running under a heavy environment like KDE.</p>
</div>
<details>
<summary class="title">/proc/cpuinfo</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>processor	: 0
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1348.129
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 0
cpu cores	: 4
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]

processor	: 1
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1700.000
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 0
cpu cores	: 4
apicid		: 1
initial apicid	: 1
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]

processor	: 2
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1385.957
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 1
cpu cores	: 4
apicid		: 2
initial apicid	: 2
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]

processor	: 3
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1381.884
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 1
cpu cores	: 4
apicid		: 3
initial apicid	: 3
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]

processor	: 4
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1411.480
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 2
cpu cores	: 4
apicid		: 4
initial apicid	: 4
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]

processor	: 5
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1700.000
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 2
cpu cores	: 4
apicid		: 5
initial apicid	: 5
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]

processor	: 6
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1700.000
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 3
cpu cores	: 4
apicid		: 6
initial apicid	: 6
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]

processor	: 7
vendor_id	: AuthenticAMD
cpu family	: 23
model		: 144
model name	: AMD Custom APU 0405
stepping	: 2
microcode	: 0x8900201
cpu MHz		: 1419.878
cache size	: 512 KB
physical id	: 0
siblings	: 8
core id		: 3
cpu cores	: 4
apicid		: 7
initial apicid	: 7
fpu		: yes
fpu_exception	: yes
cpuid level	: 16
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip rdpid overflow_recov succor smca sev sev_es
bugs		: sysret_ss_attrs spectre_v1 spectre_v2 spec_store_bypass retbleed
bogomips	: 5602.55
TLB size	: 3072 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 44 bits physical, 48 bits virtual
power management: ts ttp tm hwpstate cpb eff_freq_ro [13] [14]</pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">glxinfo</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>name of display: :0
display: :0  screen: 0
direct rendering: Yes
Extended renderer info (GLX_MESA_query_renderer):
    Vendor: AMD (0x1002)
    Device: AMD Custom GPU 0405 (vangogh, LLVM 14.0.6, DRM 3.48, 6.0.2-arch1-1) (0x163f)
    Version: 22.2.3
    Accelerated: yes
    Video memory: 1024MB
    Unified memory: no
    Preferred profile: core (0x1)
    Max core profile version: 4.6
    Max compat profile version: 4.6
    Max GLES1 profile version: 1.1
    Max GLES[23] profile version: 3.2
Memory info (GL_ATI_meminfo):
    VBO free memory - total: 959 MB, largest block: 959 MB
    VBO free aux. memory - total: 7381 MB, largest block: 7381 MB
    Texture free memory - total: 959 MB, largest block: 959 MB
    Texture free aux. memory - total: 7381 MB, largest block: 7381 MB
    Renderbuffer free memory - total: 959 MB, largest block: 959 MB
    Renderbuffer free aux. memory - total: 7381 MB, largest block: 7381 MB
Memory info (GL_NVX_gpu_memory_info):
    Dedicated video memory: 1024 MB
    Total available memory: 8441 MB
    Currently available dedicated video memory: 959 MB
OpenGL vendor string: AMD
OpenGL renderer string: AMD Custom GPU 0405 (vangogh, LLVM 14.0.6, DRM 3.48, 6.0.2-arch1-1)
OpenGL core profile version string: 4.6 (Core Profile) Mesa 22.2.3
OpenGL core profile shading language version string: 4.60
OpenGL core profile context flags: (none)
OpenGL core profile profile mask: core profile

OpenGL version string: 4.6 (Compatibility Profile) Mesa 22.2.3
OpenGL shading language version string: 4.60
OpenGL context flags: (none)
OpenGL profile mask: compatibility profile

OpenGL ES profile version string: OpenGL ES 3.2 Mesa 22.2.3
OpenGL ES profile shading language version string: OpenGL ES GLSL ES 3.20</pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">vulkaninfo --summary</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>==========
VULKANINFO
==========

Vulkan Instance Version: 1.3.235


Instance Extensions: count = 20
-------------------------------
VK_EXT_acquire_drm_display             : extension revision 1
VK_EXT_acquire_xlib_display            : extension revision 1
VK_EXT_debug_report                    : extension revision 10
VK_EXT_debug_utils                     : extension revision 2
VK_EXT_direct_mode_display             : extension revision 1
VK_EXT_display_surface_counter         : extension revision 1
VK_KHR_device_group_creation           : extension revision 1
VK_KHR_display                         : extension revision 23
VK_KHR_external_fence_capabilities     : extension revision 1
VK_KHR_external_memory_capabilities    : extension revision 1
VK_KHR_external_semaphore_capabilities : extension revision 1
VK_KHR_get_display_properties2         : extension revision 1
VK_KHR_get_physical_device_properties2 : extension revision 2
VK_KHR_get_surface_capabilities2       : extension revision 1
VK_KHR_portability_enumeration         : extension revision 1
VK_KHR_surface                         : extension revision 25
VK_KHR_surface_protected_capabilities  : extension revision 1
VK_KHR_wayland_surface                 : extension revision 6
VK_KHR_xcb_surface                     : extension revision 6
VK_KHR_xlib_surface                    : extension revision 6

Instance Layers:
----------------

Devices:
========
GPU0:
	apiVersion         = 4206816 (1.3.224)
	driverVersion      = 92282883 (0x5802003)
	vendorID           = 0x1002
	deviceID           = 0x163f
	deviceType         = PHYSICAL_DEVICE_TYPE_INTEGRATED_GPU
	deviceName         = AMD Custom GPU 0405 (RADV VANGOGH)
	driverID           = DRIVER_ID_MESA_RADV
	driverName         = radv
	driverInfo         = Mesa 22.2.3
	conformanceVersion = 1.3.0.0
	deviceUUID         = 00000000-0400-0000-0000-000000000000
	driverUUID         = 414d442d-4d45-5341-2d44-525600000000</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_networking">Networking</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">NIC</dt>
<dd>
<p>Realtek RTL8822CE 802.11ac PCIe Wireless Adapter</p>
<div class="ulist">
<ul>
<li>
<p>Bus: PCIe</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This has been a bit of a quirk in my experience.  Valve picked a cheap NIC that is known to have unstable Linux drivers and poor support, and it shows with all the issues people have been having with it.  Realtek is not good at giving a damn either.</p>
</div>
<div class="paragraph">
<p>I&#8217;m sure that, in time, this will get fixed, but in my experience I found that disabling <strong>Power Management</strong> gave me a stable enough connection to actually detect my AP for long enough to connect to it.  I described this in my <a href="https://gitlab.com/open-sd/opensd/-/wikis/Guide:-Installing-Arch-Linux-on-a-Steam-Deck">Guide for install Arch on a Steam Deck</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Bluetooth</dt>
<dd>
<p>Realtek/IMC Networks Bluetooth Radio (13d3:3553)</p>
<div class="ulist">
<ul>
<li>
<p>Bus: USB3</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<details>
<summary class="title">lsusb -v -d13d3:3553</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Bus 003 Device 003: ID 13d3:3553 IMC Networks Bluetooth Radio
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.00
  bDeviceClass          224 Wireless
  bDeviceSubClass         1 Radio Frequency
  bDeviceProtocol         1 Bluetooth
  bMaxPacketSize0        64
  idVendor           0x13d3 IMC Networks
  idProduct          0x3553
  bcdDevice            0.00
  iManufacturer           1 Realtek
  iProduct                2 Bluetooth Radio
  iSerial                 3 00e04c000001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength       0x00b1
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              4 Bluetooth Radio
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              4 Bluetooth Radio
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              4 Bluetooth Radio
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0009  1x 9 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0009  1x 9 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              4 Bluetooth Radio
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0011  1x 17 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0011  1x 17 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              4 Bluetooth Radio
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0019  1x 25 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0019  1x 25 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              4 Bluetooth Radio
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0021  1x 33 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0021  1x 33 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              4 Bluetooth Radio
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0031  1x 49 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0031  1x 49 bytes
        bInterval               1
Device Status:     0x0001
  Self Powered</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_storage">Storage</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">SSD</dt>
<dd>
<p>m.2 2230 NVMe SSD</p>
<div class="ulist">
<ul>
<li>
<p>Bus: PCIe Gen3</p>
</li>
<li>
<p>Wrapped in shielding material</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Brands seems to vary, probably due to supply issues, but they are all cheap and low-grade.  Personally, I&#8217;d never consider building or selling a machine with most of the junky SSDs I&#8217;ve seen in Steam Deck teardowns.</p>
</div>
<div class="paragraph">
<p>There are no apparent reserved / firmware blocks to be seen here, which is good.  Mysterious encrypted/binary firmware blobs stuffed into read-only block devices always set off alarms for me.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">microSD</dt>
<dd>
<p>O2 Micro SD/MMC Controller</p>
<div class="ulist">
<ul>
<li>
<p>Bus: PCIe</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Not familiar with this mfg, but I haven&#8217;t had any issues with it.</p>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="display">Display</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Screen</dt>
<dd>
<p>Unknown Manufactuer 7" Touchscreen, 800x1200 (16:10) 60hz IPS LCD</p>
</dd>
<dt class="hdlist1">Orientation</dt>
<dd>
<p>Portrait / full page (native res)</p>
</dd>
<dt class="hdlist1">Supported  Modes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>800x1280</p>
</li>
<li>
<p>800x600</p>
</li>
<li>
<p>640x480</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is still a bit of a mystery since there&#8217;s no apparent EDID or DDC information.  <code>read-edid</code> and <code>ddcutil</code> cant detect it, and I&#8217;ve looked through sysfs and cant find much either.  Not sure who makes it, but it may be the least impressive part of the Steam Deck.  Colour reproduction is not good.  I&#8201;&#8212;&#8201;and apparently a lot of other people&#8201;&#8212;&#8201;get a ton of light bleed.  Solid background colours look like gradients.  Purple is probably the worst for me.  It&#8217;s disappointing  the (newer) Nintendo Switch has a much nicer OLED.  Honestly, for a small touchscreen to use in an appliance, embedded project, mount in a wall for home automation, it&#8217;s&#8230;&#8203; okay.  For a $600+ USD gaming device, I&#8217;d hope for better.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">X11 Rotation</dt>
<dd>
<p>If you&#8217;re going to run this in its native resolution, the screen needs to be rotatated in X (probably Wayland too, havent tested).  The Touchscreen also needs the input to be transformed to match the new rotation.  I cover this in my <a href="https://gitlab.com/open-sd/opensd/-/wikis/Guide:-Installing-Arch-Linux-on-a-Steam-Deck">Install Guide</a>, but I&#8217;ll put it here too.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">/etc/X11/xorg.conf.d/30-monitor.conf</div>
<div class="content">
<pre>Section "Monitor"
    Identifier      "eDP-1"
    Option          "Rotate" "right"
EndSection</pre>
</div>
</div>
<div class="listingblock">
<div class="title">/etc/X11/xorg.conf.d/90-touchscreen.conf</div>
<div class="content">
<pre>Section "InputClass"
    Identifier          "Coordinate Transformation Matrix"
    MatchIsTouchscreen  "on"
    MatchDevicePath     "/dev/input/event*"
    MatchDriver         "libinput"
    Option              "CalibrationMatrix" "0 1 0 -1 0 1 0 0 1"
EndSection</pre>
</div>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_audio">Audio</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Chip</dt>
<dd>
<p>AMD ACP/ACP3X/ACP6x Audio Coprocessor</p>
<div class="ulist">
<ul>
<li>
<p>part of the Van Gogh SoC</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<details open>
<summary class="title">aplay -l</summary>
<div class="content">
<div class="paragraph">
<p>To list playback devices:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>**** List of PLAYBACK Hardware Devices ****
card 0: Generic [HD-Audio Generic], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Generic [HD-Audio Generic], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Generic [HD-Audio Generic], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Generic [HD-Audio Generic], device 9: HDMI 3 [HDMI 3]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 1: acp5x [acp5x], device 0: Playback/Capture nau8821-hifi-0 []
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 1: acp5x [acp5x], device 1: CS35L41 Stereo Playback multicodec-1 []
  Subdevices: 1/1
  Subdevice #0: subdevice #0</pre>
</div>
</div>
<div class="paragraph">
<p>Card 1, Device 1 is for internal playback on the built-in speakers.</p>
</div>
</div>
</details>
<div class="paragraph">
<p>and</p>
</div>
<details open>
<summary class="title">arecord -l</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>**** List of CAPTURE Hardware Devices ****
card 1: acp5x [acp5x], device 0: Playback/Capture nau8821-hifi-0 []
  Subdevices: 1/1
  Subdevice #0: subdevice #0</pre>
</div>
</div>
</div>
</details>
<details open>
<summary class="title">lsmod | grep snd</summary>
<div class="content">
<div class="paragraph">
<p>kernel 6.0.9-arch1-1 #1 SMP PREEMPT_DYNAMIC Wed, 16 Nov 2022 17:01:17 +0000 x86_64 GNU/Linux</p>
</div>
<div class="listingblock">
<div class="content">
<pre>snd_soc_acp5x_mach     20480  0
snd_acp5x_i2s          16384  2
snd_acp5x_pcm_dma      16384  1
snd_sof_amd_renoir     16384  0
snd_sof_amd_acp        53248  1 snd_sof_amd_renoir
snd_sof_pci            24576  1 snd_sof_amd_renoir
snd_hda_codec_hdmi     86016  1
snd_soc_cs35l41_spi    16384  2
snd_sof               307200  3 snd_sof_amd_acp,snd_sof_pci,snd_sof_amd_renoir
snd_soc_cs35l41        65536  1 snd_soc_cs35l41_spi
snd_hda_intel          61440  0
snd_sof_utils          20480  1 snd_sof
snd_soc_wm_adsp        49152  1 snd_soc_cs35l41
snd_intel_dspcfg       36864  2 snd_hda_intel,snd_sof
snd_rpl_pci_acp6x      20480  0
snd_acp_pci            16384  0
cs_dsp                 73728  1 snd_soc_wm_adsp
snd_intel_sdw_acpi     20480  1 snd_intel_dspcfg
snd_soc_nau8821        57344  2 snd_soc_acp5x_mach
snd_soc_cs35l41_lib    36864  2 snd_soc_cs35l41_spi,snd_soc_cs35l41
snd_pci_acp6x          20480  0
snd_hda_codec         188416  2 snd_hda_codec_hdmi,snd_hda_intel
snd_pci_acp5x          20480  0
snd_rn_pci_acp3x       24576  0
snd_soc_core          393216  7 snd_acp5x_i2s,snd_soc_nau8821,snd_soc_wm_adsp,snd_sof,snd_acp5x_pcm_dma,snd_soc_cs35l41,snd_soc_acp5x_mach
snd_hda_core          118784  3 snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec
snd_acp_config         16384  3 snd_rn_pci_acp3x,snd_acp_pci,snd_sof_amd_renoir
snd_compress           28672  2 snd_soc_wm_adsp,snd_soc_core
snd_soc_acpi           16384  2 snd_acp_config,snd_sof_amd_renoir
ac97_bus               16384  1 snd_soc_core
snd_hwdep              16384  1 snd_hda_codec
snd_pcm_dmaengine      16384  1 snd_soc_core
snd_pci_acp3x          20480  0
snd_pcm               172032  15 snd_sof_amd_acp,snd_soc_nau8821,snd_hda_codec_hdmi,snd_pci_acp6x,snd_hda_intel,snd_hda_codec,snd_sof,snd_acp5x_pcm_dma,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_soc_cs35l41,snd_soc_acp5x_mach,snd_pcm_dmaengine
snd_timer              49152  1 snd_pcm
snd                   131072  11 snd_hda_codec_hdmi,snd_hwdep,snd_hda_intel,snd_soc_wm_adsp,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm,snd_soc_acp5x_mach
soundcore              16384  1 snd</pre>
</div>
</div>
<div class="paragraph">
<p>As you can see there are a number of sound modules associated with the SoC, including a Nuvoton audio codec (nau8821)</p>
</div>
</div>
</details>
<div class="paragraph">
<p>This one is a bit of a problem.</p>
</div>
<div class="paragraph">
<p>Valve chose an audio chip that had no support before they began.  They&#8217;ve put patches into their downstream kernel when they <strong>should</strong> have been focussing on getting mainline kernel support before anything&#8201;&#8212;&#8201;or, controversially, just pick one of the <strong>thousands</strong> of perfectly functional and well supported audio devices that <em>already exist</em>.  But Valve still ended up with a ridiculous amount of audio problems.  The first preview units of the final design were demo&#8217;d back around the middle of 2021, when several of the drivers had not even been submitted by the mfgs yet.  As of November 2022, this is <strong>still</strong> a sore spot.  The mainline kernel has just very recently got support and it&#8217;s still broken.</p>
</div>
<div class="paragraph">
<p>Currently on the very latest kernel 6.0.9, I only get audio out of the left speaker, mono channel rendering is not supported, device drops out, etc.  These are also problems SteamOS users are experience too, apparently, which absolutely points to sloppy hardware design.  I&#8217;d expect this of some obscure hardware manufacturer that wont acknowledge Linux even exists, but for a flagship Linux-only product, this reflects poorly on Valve since they&#8217;ve had around three years to get this working or pick better hardware.</p>
</div>
<div class="paragraph">
<p>Mainline kernel support is not far off now.  We&#8217;ll get there.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Testing</dt>
<dd>
<p>From the terminal using tools from the <code>alsa-utils</code> package (Arch and Debian)</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ speaker-test -Dhw:1,1 -c2</code></pre>
</div>
</div>
<div class="paragraph">
<p>I only get a left channel, which others have reported on up-to-date official SteamOS as well.  Some have apparently RMA&#8217;d their units, so maybe I have a defective one too?</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_input_devices">Input Devices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Steam Deck has a few input interfaces, and has been the primary focus of my work with the device.</p>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div class="sect2">
<h3 id="_usb_interface">USB interface</h3>
<details open>
<summary class="title">lsusb</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 003 Device 003: ID 13d3:3553 IMC Networks Bluetooth Radio
Bus 003 Device 002: ID 28de:1205 Valve Software Steam Deck Controller
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Most the available inputs appear to be attached to the internal USB3 bus, which makes it pretty easy to get access to.  Even without explicit drivers, the hidraw subsystem makes these available in <code>/dev/hidraw*</code>.  They can also be accessed via low-level USB APIs.</p>
</div>
<div class="paragraph">
<p>This is my dev system, so I have OpenSD udev rules installed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>crw-rw---- 1 root opensd 241, 0 Nov 21 10:48 /dev/hidraw0
crw-rw---- 1 root opensd 241, 1 Nov 21 10:48 /dev/hidraw1
crw------- 1 root root   241, 2 Nov 21 10:48 /dev/hidraw2
crw-rw---- 1 root opensd 241, 3 Nov 21 10:48 /dev/hidraw3</pre>
</div>
</div>
<div class="paragraph">
<p>In this case, <code>hidraw0</code>, <code>hidraw1</code> and <code>hidraw3</code> are all the same USB device for the "Steam Deck Controller", which is <em>most</em> of the user-facing input features (buttons, sticks, triggers, pads, etc).  <code>hidraw2</code> is the touchscreen device, which I&#8217;ll get into later.</p>
</div>
<div class="paragraph">
<p>The gamepad USB interface looks like this:</p>
</div>
<details open>
<summary class="title">lsusb -v -d28de:1205</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Bus 003 Device 002: ID 28de:1205 Valve Software Steam Deck Controller
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x28de Valve Software
  idProduct          0x1205
  bcdDevice            2.00
  iManufacturer           1 Valve Software
  iProduct                2 Steam Deck Controller
  iSerial                 3 MEDA228045B1
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength       0x0096
    bNumInterfaces          5
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0                         &lt;----------------- <b class="conum">(1)</b>
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Device
      bInterfaceSubClass      1 Boot Interface Subclass
      bInterfaceProtocol      1 Keyboard
      iInterface              0
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode           33 US
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      39
         Report Descriptors:
           ** UNAVAILABLE **
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1                         &lt;----------------- <b class="conum">(2)</b>
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Device
      bInterfaceSubClass      0
      bInterfaceProtocol      2 Mouse
      iInterface              0
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      50
         Report Descriptors:
           ** UNAVAILABLE **
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2                         &lt;----------------- <b class="conum">(3)</b>
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Device
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      29
         Report Descriptors:
           ** UNAVAILABLE **
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         3
      bInterfaceCount         2
      bFunctionClass          2 Communications
      bFunctionSubClass       2 Abstract (modem)
      bFunctionProtocol       1 AT-commands (v.25ter)
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         2 Communications
      bInterfaceSubClass      2 Abstract (modem)
      bInterfaceProtocol      1 AT-commands (v.25ter)
      iInterface              0
      CDC Header:
        bcdCDC               1.10
      CDC Call Management:
        bmCapabilities       0x01
          call management
        bDataInterface          2
      CDC ACM:
        bmCapabilities       0x02
          line coding and serial state
      CDC Union:
        bMasterInterface        3
        bSlaveInterface         4
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval             255
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        4
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass        10 CDC Data
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x05  EP 5 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
Device Status:     0x0000
  (Bus Powered)</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>"Lizard Mode" keyboard HID</p>
</li>
<li>
<p>"Lizard Mode" mouse HID</p>
</li>
<li>
<p>Gamepad / master HID</p>
</li>
</ol>
</div>
</div>
</details>
<div class="paragraph">
<p>As the callouts indicate above, this USB device has 3 HID-class sub-devices.  The first two are explained in more detail in the <a href="#lizard_mode">Lizard Mode</a> section below, but they are, in a sense, child devices of the third (<code>bInterfaceNum 2</code>) sub-device, which is the gamepad.</p>
</div>
<div class="paragraph">
<p>The gamepad interface sends input reports which contain (nearly) all the user-facing input states, including the trackpads which produce data for the "Lizard Mode" mouse sub-device uses.  The gamepad interface can also written to and is used to receive feature reports, whereas the the other two interfaces <strong>cannot</strong> receive feature reports.  The "Lizard Mode" mouse/keyboard interfaces can be <strong>disabled</strong>, but <strong>only</strong> by sending a feature report to the gamepad interface.  This essentially makes the gamepad the <strong>master</strong> sub-device.</p>
</div>
<div class="paragraph">
<p>Reading and writing this interface can be done in the usual ways, as with other USB and HID-class devices, so I wont go into how to use those APIs, but I do get into the HID report numbers, structures, etc which are are at the heart of OpenSD, in the <a href="#hid_reports">HID Reports</a> section.</p>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="input_event_devices">Input Event Devices</h3>
<div class="paragraph">
<p>evtest</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/dev/input/event0:	Power Button
/dev/input/event1:	Lid Switch
/dev/input/event2:	Power Button
/dev/input/event3:	AT Translated Set 2 keyboard
/dev/input/event4:	Video Bus
/dev/input/event5:	Valve Software Steam Deck Controller
/dev/input/event6:	Valve Software Steam Deck Controller
/dev/input/event7:	acp5x Headset Jack
/dev/input/event8:	FTS3528:00 2808:1015
/dev/input/event9:	HD-Audio Generic HDMI/DP,pcm=3
/dev/input/event10:	HD-Audio Generic HDMI/DP,pcm=7
/dev/input/event11:	HD-Audio Generic HDMI/DP,pcm=8
/dev/input/event12:	HD-Audio Generic HDMI/DP,pcm=9
/dev/input/event13:	PC Speaker
/dev/input/event14:	FTS3528:00 2808:1015 UNKNOWN</pre>
</div>
</div>
<div class="paragraph">
<p>There are a few notable event nodes here:  the <code>Valve Software Steam Deck Controller</code>, <code>AT Translated Set 2 keyboard</code>, <code>Power Button</code> and the <code>FTS3528</code> devices.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Gamepad</dt>
<dd>
<p>The two "Valve Software Steam Deck Controller" devices (<code>event5</code> and <code>event6</code>) Are the "Lizard Mode" mouse and keyboard devices.</p>
</dd>
<dt class="hdlist1">Volume</dt>
<dd>
<p>Interestingly, the two <strong>volume buttons</strong>, <code>+</code> <code>-</code> on the top of the Steam Deck are not part of the rest of the gamepad input reports.  They are connected to the <code>AT Translated Set 2 keyboard</code> (<code>event3</code>) device, which appears as an entire PS/2(?) keyboard:</p>
</dd>
</dl>
</div>
<details open>
<summary class="title">evtest /dev/input/event3</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Input device ID: bus 0x11 vendor 0x1 product 0x1 version 0xab83
Input device name: "AT Translated Set 2 keyboard"
Supported events:
  Event type 0 (EV_SYN)
  Event type 1 (EV_KEY)
    Event code 1 (KEY_ESC)
    Event code 2 (KEY_1)
    Event code 3 (KEY_2)
    Event code 4 (KEY_3)
    Event code 5 (KEY_4)
    Event code 6 (KEY_5)
    Event code 7 (KEY_6)
    Event code 8 (KEY_7)
    Event code 9 (KEY_8)
    Event code 10 (KEY_9)
    Event code 11 (KEY_0)
    Event code 12 (KEY_MINUS)
    Event code 13 (KEY_EQUAL)
    Event code 14 (KEY_BACKSPACE)
    Event code 15 (KEY_TAB)
    Event code 16 (KEY_Q)
    Event code 17 (KEY_W)
    Event code 18 (KEY_E)
    Event code 19 (KEY_R)
    Event code 20 (KEY_T)
    Event code 21 (KEY_Y)
    Event code 22 (KEY_U)
    Event code 23 (KEY_I)
    Event code 24 (KEY_O)
    Event code 25 (KEY_P)
    Event code 26 (KEY_LEFTBRACE)
    Event code 27 (KEY_RIGHTBRACE)
    Event code 28 (KEY_ENTER)
    Event code 29 (KEY_LEFTCTRL)
    Event code 30 (KEY_A)
    Event code 31 (KEY_S)
    Event code 32 (KEY_D)
    Event code 33 (KEY_F)
    Event code 34 (KEY_G)
    Event code 35 (KEY_H)
    Event code 36 (KEY_J)
    Event code 37 (KEY_K)
    Event code 38 (KEY_L)
    Event code 39 (KEY_SEMICOLON)
    Event code 40 (KEY_APOSTROPHE)
    Event code 41 (KEY_GRAVE)
    Event code 42 (KEY_LEFTSHIFT)
    Event code 43 (KEY_BACKSLASH)
    Event code 44 (KEY_Z)
    Event code 45 (KEY_X)
    Event code 46 (KEY_C)
    Event code 47 (KEY_V)
    Event code 48 (KEY_B)
    Event code 49 (KEY_N)
    Event code 50 (KEY_M)
    Event code 51 (KEY_COMMA)
    Event code 52 (KEY_DOT)
    Event code 53 (KEY_SLASH)
    Event code 54 (KEY_RIGHTSHIFT)
    Event code 55 (KEY_KPASTERISK)
    Event code 56 (KEY_LEFTALT)
    Event code 57 (KEY_SPACE)
    Event code 58 (KEY_CAPSLOCK)
    Event code 59 (KEY_F1)
    Event code 60 (KEY_F2)
    Event code 61 (KEY_F3)
    Event code 62 (KEY_F4)
    Event code 63 (KEY_F5)
    Event code 64 (KEY_F6)
    Event code 65 (KEY_F7)
    Event code 66 (KEY_F8)
    Event code 67 (KEY_F9)
    Event code 68 (KEY_F10)
    Event code 69 (KEY_NUMLOCK)
    Event code 70 (KEY_SCROLLLOCK)
    Event code 71 (KEY_KP7)
    Event code 72 (KEY_KP8)
    Event code 73 (KEY_KP9)
    Event code 74 (KEY_KPMINUS)
    Event code 75 (KEY_KP4)
    Event code 76 (KEY_KP5)
    Event code 77 (KEY_KP6)
    Event code 78 (KEY_KPPLUS)
    Event code 79 (KEY_KP1)
    Event code 80 (KEY_KP2)
    Event code 81 (KEY_KP3)
    Event code 82 (KEY_KP0)
    Event code 83 (KEY_KPDOT)
    Event code 85 (KEY_ZENKAKUHANKAKU)
    Event code 86 (KEY_102ND)
    Event code 87 (KEY_F11)
    Event code 88 (KEY_F12)
    Event code 89 (KEY_RO)
    Event code 90 (KEY_KATAKANA)
    Event code 91 (KEY_HIRAGANA)
    Event code 92 (KEY_HENKAN)
    Event code 93 (KEY_KATAKANAHIRAGANA)
    Event code 94 (KEY_MUHENKAN)
    Event code 95 (KEY_KPJPCOMMA)
    Event code 96 (KEY_KPENTER)
    Event code 97 (KEY_RIGHTCTRL)
    Event code 98 (KEY_KPSLASH)
    Event code 99 (KEY_SYSRQ)
    Event code 100 (KEY_RIGHTALT)
    Event code 102 (KEY_HOME)
    Event code 103 (KEY_UP)
    Event code 104 (KEY_PAGEUP)
    Event code 105 (KEY_LEFT)
    Event code 106 (KEY_RIGHT)
    Event code 107 (KEY_END)
    Event code 108 (KEY_DOWN)
    Event code 109 (KEY_PAGEDOWN)
    Event code 110 (KEY_INSERT)
    Event code 111 (KEY_DELETE)
    Event code 112 (KEY_MACRO)
    Event code 113 (KEY_MUTE)
    Event code 114 (KEY_VOLUMEDOWN)
    Event code 115 (KEY_VOLUMEUP)
    Event code 116 (KEY_POWER)
    Event code 117 (KEY_KPEQUAL)
    Event code 118 (KEY_KPPLUSMINUS)
    Event code 119 (KEY_PAUSE)
    Event code 121 (KEY_KPCOMMA)
    Event code 122 (KEY_HANGUEL)
    Event code 123 (KEY_HANJA)
    Event code 124 (KEY_YEN)
    Event code 125 (KEY_LEFTMETA)
    Event code 126 (KEY_RIGHTMETA)
    Event code 127 (KEY_COMPOSE)
    Event code 128 (KEY_STOP)
    Event code 140 (KEY_CALC)
    Event code 142 (KEY_SLEEP)
    Event code 143 (KEY_WAKEUP)
    Event code 155 (KEY_MAIL)
    Event code 156 (KEY_BOOKMARKS)
    Event code 157 (KEY_COMPUTER)
    Event code 158 (KEY_BACK)
    Event code 159 (KEY_FORWARD)
    Event code 163 (KEY_NEXTSONG)
    Event code 164 (KEY_PLAYPAUSE)
    Event code 165 (KEY_PREVIOUSSONG)
    Event code 166 (KEY_STOPCD)
    Event code 172 (KEY_HOMEPAGE)
    Event code 173 (KEY_REFRESH)
    Event code 183 (KEY_F13)
    Event code 184 (KEY_F14)
    Event code 185 (KEY_F15)
    Event code 217 (KEY_SEARCH)
    Event code 226 (KEY_MEDIA)
  Event type 4 (EV_MSC)
    Event code 4 (MSC_SCAN)
  Event type 17 (EV_LED)
    Event code 0 (LED_NUML) state 0
    Event code 1 (LED_CAPSL) state 0
    Event code 2 (LED_SCROLLL) state 0
Key repeat handling:
  Repeat type 20 (EV_REP)
    Repeat code 0 (REP_DELAY)
      Value    250
    Repeat code 1 (REP_PERIOD)
      Value     33</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>However, the only(?) physical buttons in use are the two volume keys, which emit the expected <code>KEY_VOLUMEUP</code> and <code>KEY_VOLUMEDOWN</code> events.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Power</dt>
<dd>
<p>I haven&#8217;t played with this too much, but it looks like a standard ACPI power button.</p>
</dd>
<dt class="hdlist1">Touchscreen</dt>
<dd>
<p>The <code>FTS3528:00 2808:10151</code> (event8) and <code>FTS3528:00 2808:1015 UNKNOWN</code> (event14) are the touchscreen devices.  They both appear to connect via the <a href="https://en.wikipedia.org/wiki/I%C2%B2S">i2s</a> bus as a single HID device (as noted about hidraw nodes earlier), with two interfaces.  Raw touchscreen input can be read using the kernel hidraw interface.  It uses <strong>60-byte input reports</strong>, which I have not yet decoded.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Like the display manufacturer, this is a bit mysterious.  There&#8217;s a decent chance that the display manufacturer and the touchscreen sensor manufacturer are not the same.  Doing a quick search about this thing didn&#8217;t reveal much.  Eventually I&#8217;ll probably dig into the origins a bit more.</p>
</div>
<div class="paragraph">
<p>It should be noted that, like the display, the native orientation is <strong>portrait / full page</strong>, rather than <strong>landscape / widescreen</strong> as it&#8217;s oriented on the Steam Deck.  So, while X and Wayland can use them, both the screen coordinates and the input coordinates need to be transformed (unless you hate your neck).  I&#8217;ve given instructions on how to do this with X in the <a href="#display">Display</a> section.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>FTS3528:00 2808:10151</code> (event8)</dt>
<dd>
<p>This is the touchscreen input which works out of the box, at least on the kernels I&#8217;ve tested.  It supports these events:</p>
</dd>
</dl>
</div>
<details open>
<summary class="title">evtest /dev/input/event8</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Input driver version is 1.0.1
Input device ID: bus 0x18 vendor 0x2808 product 0x1015 version 0x100
Input device name: "FTS3528:00 2808:1015"
Supported events:
  Event type 0 (EV_SYN)
  Event type 1 (EV_KEY)
    Event code 330 (BTN_TOUCH)
  Event type 3 (EV_ABS)
    Event code 0 (ABS_X)
      Value    204
      Min        0
      Max      800
      Resolution       3
    Event code 1 (ABS_Y)
      Value   1031
      Min        0
      Max     1280
      Resolution       9
    Event code 47 (ABS_MT_SLOT)
      Value      0
      Min        0
      Max        9
    Event code 48 (ABS_MT_TOUCH_MAJOR)
      Value      0
      Min        0
      Max      255
      Resolution      10
    Event code 49 (ABS_MT_TOUCH_MINOR)
      Value      0
      Min        0
      Max      255
      Resolution      10
    Event code 52 (ABS_MT_ORIENTATION)
      Value      0
      Min        0
      Max        1
    Event code 53 (ABS_MT_POSITION_X)
      Value      0
      Min        0
      Max      800
      Resolution       3
    Event code 54 (ABS_MT_POSITION_Y)
      Value      0
      Min        0
      Max     1280
      Resolution       9
    Event code 57 (ABS_MT_TRACKING_ID)
      Value      0
      Min        0
      Max    65535
    Event code 60 (ABS_MT_TOOL_X)
      Value      0
      Min        0
      Max      800
      Resolution       3
    Event code 61 (ABS_MT_TOOL_Y)
      Value      0
      Min        0
      Max     1280
      Resolution       9
  Event type 4 (EV_MSC)
    Event code 5 (MSC_TIMESTAMP)
Properties:
  Property type 1 (INPUT_PROP_DIRECT)</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>I need to spend more time playing around with this, but it appears to support at least 2-point multi-touch.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>FTS3528:00 2808:1015 UNKNOWN</code> (event14)</dt>
<dd>
<p>This appears(?) to be a stylus interface, however I cannot get it to produce any events.  I&#8217;ve tried a few styluses I have lying around and&#8230;&#8203; nada.  nothing.  It might not actually have this feature at all and it&#8217;s just the firmware.  I&#8217;d be interested to know if anyone has gotten this to work.  It supports the following events:</p>
</dd>
</dl>
</div>
<details open>
<summary class="title">evtest /dev/input/event14</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Input driver version is 1.0.1
Input device ID: bus 0x18 vendor 0x2808 product 0x1015 version 0x100
Input device name: "FTS3528:00 2808:1015 UNKNOWN"
Supported events:
  Event type 0 (EV_SYN)
  Event type 1 (EV_KEY)
    Event code 320 (BTN_TOOL_PEN)
    Event code 330 (BTN_TOUCH)
    Event code 331 (BTN_STYLUS)
  Event type 3 (EV_ABS)
    Event code 0 (ABS_X)
      Value      0
      Min        0
      Max     4095
      Resolution      14
    Event code 1 (ABS_Y)
      Value      0
      Min        0
      Max     4095
      Resolution      25
    Event code 24 (ABS_PRESSURE)
      Value      0
      Min        1
      Max      255
  Event type 4 (EV_MSC)
    Event code 4 (MSC_SCAN)</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="lizard_mode">Lizard Mode</h3>
<div class="paragraph">
<p>The Steam Deck, as with the Steam Controller, has a kind of fallback "BIOS mode" functionality, which emulates some basic mouse and keyboard functions, like arrow keys, enter, left and right mouse buttons.  These are <strong>sub-devices</strong> of the gamepad, and rely on the data that the gamepad device produces to emit input events.  They each have their own interface number on the main USB HID.  This mode is <strong>enabled</strong> by default and immediately available at boot, which is how you navigate the UEFI / BIOS bootloader screens.</p>
</div>
<div class="paragraph">
<p>These two devices <strong>do not</strong> send joystick events, even though they are driven by joystick input.  Steam implements a proprietaty userspace driver <em>from within the client itself</em> to access the gamepad input leaving all other applications with a crippled "Lizard Mode" fallback input system.</p>
</div>
<div class="paragraph">
<p>When the Steam client connects the the gamepad device, it sends a feature report to <strong>temporarily</strong> disable the "Lizard Mode" mouse and keyboard from sending input events.  These will remain disabled for a few seconds, then automatically re-enable themselves, presumably to prevent the device from becoming <strong>completely</strong> unusable if Steam exits or crashes.  These feature reports must continually be sent every couple seconds to prevent them from re-enabling.  This report is only send to the master/gamepad interface of the USB device (<code>bInterfaceNum 2</code>), the other two (<code>bInterfaceNum 0</code> and <code>bInterfaceNum 1</code>) devices cannot be written to.  See the <a href="#hid_reports">HID Reports</a> section for more information on these reports, and see the <a href="https://gitlab.com/open-sd/opensd">OpenSD</a> source code for a multi-threaded implementation.</p>
</div>
<div class="paragraph">
<p>When "Lizard Mode" is <strong>not</strong> disabled, these devices will continue to send input event codes even if you are correctly decoding the raw gamepad input reports, so it is necessary to disable them in order to use the <em>actual</em> gamepad input or you will get multiple events emitted from several buttons, as well as multiple mouse</p>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="hid_reports">HID Reports</h3>
<div class="paragraph">
<p>There are at least two HID devices worth exploring here, so I&#8217;ll break them down into sections for each device.</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
<div class="sect3">
<h4 id="_steam_deck_contoller">Steam Deck Contoller</h4>
<div class="paragraph">
<p>The Steam Deck gamepad / controller uses a report structure similar to the Steam Controller, which makes a lot of sense.  In a way, the Steam Deck could be considered the Steam Controller 2, since it generally improves on the older design and adds more features.</p>
</div>
<div class="paragraph">
<p>Polling rate on this device seems(?) to be fixed to 250Hz, which is on the low end of USB polling, but it&#8217;s debatable if more is really necessary.  It&#8217;s also possible there&#8217;s an issue with the kernel or udev which limits it.</p>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
<div class="sect4">
<h5 id="_report_ids">Report IDs</h5>
<div class="paragraph">
<p>I&#8217;ve found most of the report numbers are the same as the SC, so I&#8217;ve used the SC kernel driver for a bit of reference to their names.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>INPUT                       = 0x01
SET_MAPPINGS                = 0x80
CLEAR_MAPPINGS              = 0x81
GET_MAPPINGS                = 0x82
GET_ATTRIB                  = 0x83
GET_ATTRIB_LABEL            = 0x84
DEFAULT_MAPPINGS            = 0x85
FACTORY_RESET               = 0x86
WRITE_REGISTER              = 0x87
CLEAR_REGISTER              = 0x88
READ_REGISTER               = 0x89
GET_REGISTER_LABEL          = 0x8a
GET_REGISTER_MAX            = 0x8b
GET_REGISTER_DEFAULT        = 0x8c
SET_MODE                    = 0x8d
DEFAULT_MOUSE               = 0x8e
FORCE_FEEDBACK              = 0x8f
REQUEST_COMM_STATUS         = 0xb4
GET_SERIAL                  = 0xae</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
</div>
<div class="sect4">
<h5 id="_registers">Registers</h5>
<div class="paragraph">
<p>Thse are for programming the controller with the <code>WRITE_REGISTER</code>, <code>READ_REGISTER</code> and <code>CLEAR_REGISTER</code> reports.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>LPAD_MODE                   = 0x07
RPAD_MODE                   = 0x08
RPAD_MARGIN                 = 0x18
GYRO_MODE                   = 0x30</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
</div>
<div class="sect4">
<h5 id="_report_sizes">Report Sizes</h5>
<div class="paragraph">
<p>These are the size of the HID reports in bytes / octets</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>INPUT                       = 64
HAPTIC                      = 7(?)
CONFIG                      = 21(?)</code></pre>
</div>
</div>
<div class="paragraph">
<p>I still have more work to do on FF support, so I&#8217;m not sure of the numbers with "(?)"s</p>
</div>
<div class="paragraph">
<p>&#160;<br>
&#160;</p>
</div>
</div>
<div class="sect4">
<h5 id="_input_report">Input Report</h5>
<div class="paragraph">
<p>This is the input report packet that contains nearly every input state on the Steam Deck.</p>
</div>
<div class="paragraph">
<p>The report size is 64 bytes long and can be read as a tightly packed struct in this order.  This is a slightly reformatted copy of the code that OpenSD uses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>┌───────────────┬──────┬──────────┬──────────┬───────────────────────────────────────────────────────────────────┐
│     Name      │ Bits │   Type   │ Byte Num │                            Description                            │
├───────────────┼──────┼──────────┼──────────┼───────────────────────────────────────────────────────────────────┤
│ report_id     │    8 │ uint8_t  │      0   │ HID input report ID                                               │
│ _unk0         │    8 │ uint8_t  │      1   │ Always returns 0. Possibly USAGE PAGE?                            │
│ _unk1         │    8 │ uint8_t  │      2   │ Always returns 9. Possibly status like SC?  Could also be USAGE?  │
│ report_size   │    8 │ uint8_t  │      3   │ Appears to be the length of report in bytes.  Always returns 64.  │
│ frame         │   32 │ uint32_t │      4   │ Looks like a linear counter for input frames                      │
│ r2            │    1 │ bool     │      8.0 │ Binary sensor for analogue triggers                               │
│ l2            │    1 │ bool     │      8.1 │ “                                                                 │
│ r1            │    1 │ bool     │      8.2 │ Shoulder buttons                                                  │
│ l1            │    1 │ bool     │      8.3 │ “                                                                 │
│ y             │    1 │ bool     │      8.4 │ Button cluster                                                    │
│ b             │    1 │ bool     │      8.5 │ “                                                                 │
│ x             │    1 │ bool     │      8.6 │ “                                                                 │
│ a             │    1 │ bool     │      8.7 │ “                                                                 │
│ up            │    1 │ bool     │      9.0 │ Directional Pad buttons                                           │
│ right         │    1 │ bool     │      9.1 │ “                                                                 │
│ left          │    1 │ bool     │      9.2 │ “                                                                 │
│ down          │    1 │ bool     │      9.3 │ “                                                                 │
│ options       │    1 │ bool     │      9.4 │ View / Overlapping square ⧉  button located above left stick      │
│ steam         │    1 │ bool     │      9.5 │ STEAM button below left trackpad                                  │
│ menu          │    1 │ bool     │      9.6 │ Hamburger (☰) button located above right stick                    │
│ l5            │    1 │ bool     │      9.7 │ L5 &amp; R5 on the back of the deck                                   │
│ r5            │    1 │ bool     │     10.0 │ “                                                                 │
│ l_pad_press   │    1 │ bool     │     10.1 │ Binary press sensor for trackpads                                 │
│ r_pad_press   │    1 │ bool     │     10.2 │ “                                                                 │
│ l_pad_touch   │    1 │ bool     │     10.3 │ Binary touch sensor for trackpads                                 │
│ r_pad_touch   │    1 │ bool     │     10.4 │ “                                                                 │
│ _unk3         │    1 │ bool     │     10.5 │ Unknown                                                           │
│ l3            │    1 │ bool     │     10.6 │ Z-axis button on the left stick                                   │
│ _unk4         │    1 │ bool     │     10.7 │ Unknown                                                           │
│ _unk5         │    1 │ bool     │     11.0 │ “                                                                 │
│ _unk6         │    1 │ bool     │     11.1 │ “                                                                 │
│ r3            │    1 │ bool     │     11.2 │ Z-axis button on the right stick                                  │
│ _unk7         │    1 │ bool     │     11.3 │ Unknown                                                           │
│ _unk8         │    1 │ bool     │     11.4 │ “                                                                 │
│ _unk9         │    1 │ bool     │     11.5 │ “                                                                 │
│ _unk10        │    1 │ bool     │     11.6 │ “                                                                 │
│ _unk11        │    1 │ bool     │     11.7 │ “                                                                 │
│ _unk12        │    1 │ bool     │     12.0 │ No readings on any of these.                                      │
│ _unk13        │    1 │ bool     │     12.1 │ “                                                                 │
│ _unk14        │    1 │ bool     │     12.2 │ “                                                                 │
│ _unk15        │    1 │ bool     │     12.3 │ “                                                                 │
│ _unk16        │    1 │ bool     │     12.4 │ “                                                                 │
│ _unk17        │    1 │ bool     │     12.5 │ “                                                                 │
│ _unk18        │    1 │ bool     │     12.6 │ “                                                                 │
│ _unk19        │    1 │ bool     │     12.7 │ “                                                                 │
│ _unk20        │    1 │ bool     │     13.0 │ “                                                                 │
│ l4            │    1 │ bool     │     13.1 │ L4 &amp; R4 on the back of the deck                                   │
│ r4            │    1 │ bool     │     13.2 │ “                                                                 │
│ _unk21        │    1 │ bool     │     13.3 │ Unknown                                                           │
│ _unk22        │    1 │ bool     │     13.4 │ “                                                                 │
│ _unk23        │    1 │ bool     │     13.5 │ “                                                                 │
│ l_stick_touch │    1 │ bool     │     13.6 │ Binary touch sensors on the stick controls                        │
│ r_stick_touch │    1 │ bool     │     13.7 │ “                                                                 │
│ _unk24        │    1 │ bool     │     14.0 │ Unknown                                                           │
│ _unk25        │    1 │ bool     │     14.1 │ “                                                                 │
│ quick_access  │    1 │ bool     │     14.2 │ Quick Access (...) button below right trackpad                    │
│ _unk26        │    1 │ bool     │     14.3 │ Unknown                                                           │
│ _unk27        │    1 │ bool     │     14.4 │ “                                                                 │
│ _unk28        │    1 │ bool     │     14.5 │ “                                                                 │
│ _unk29        │    1 │ bool     │     14.6 │ “                                                                 │
│ _unk30        │    1 │ bool     │     14.7 │ “                                                                 │
│ _unk31        │    8 │ uint8_t  │     15   │ Not sure, maybe padding or just unused                            │
│ l_pad_x       │   16 │ int16_t  │     16   │ Trackpad touch coordinates                                        │
│ l_pad_y       │   16 │ int16_t  │     18   │ “                                                                 │
│ r_pad_x       │   16 │ int16_t  │     20   │ “                                                                 │
│ r_pad_y       │   16 │ int16_t  │     22   │ “                                                                 │
│ accel_x       │   16 │ int16_t  │     24   │ Accelerometers I think.  Needs more testing.                      │
│ accel_y       │   16 │ int16_t  │     26   │ “                                                                 │
│ accel_z       │   16 │ int16_t  │     28   │ “                                                                 │
│ pitch         │   16 │ int16_t  │     30   │ Attitude (?)  Needs more testing.                                 │
│ yaw           │   16 │ int16_t  │     32   │ “                                                                 │
│ roll          │   16 │ int16_t  │     34   │ “                                                                 │
│ _gyro0        │   16 │ int16_t  │     36   │ Not sure what these are...                                        │
│ _gyro1        │   16 │ int16_t  │     38   │ Seems like they might be additional gyros for extra precision (?) │
│ _gyro2        │   16 │ int16_t  │     40   │ “                                                                 │
│ _gyro3        │   16 │ int16_t  │     42   │ “                                                                 │
│ l_trigg       │   16 │ uint16_t │     44   │ Pressure sensors for L2 &amp; R2 triggers                             │
│ r_trigg       │   16 │ uint16_t │     46   │ “                                                                 │
│ l_stick_x     │   16 │ int16_t  │     48   │ Analogue thumbsticks                                              │
│ l_stick_y     │   16 │ int16_t  │     50   │ “                                                                 │
│ r_stick_x     │   16 │ int16_t  │     52   │ “                                                                 │
│ r_stick_y     │   16 │ int16_t  │     54   │ “                                                                 │
│ l_pad_force   │   16 │ uint16_t │     56   │ Touchpad pressure sensors                                         │
│ r_pad_force   │   16 │ uint16_t │     58   │ “                                                                 │
│ l_stick_force │   16 │ uint16_t │     60   │ Thumbstick capacitive sensors                                     │
│ r_stick_force │   16 │ uint16_t │     62   │ “                                                                 │
└───────────────┴──────┴──────────┴──────────┴───────────────────────────────────────────────────────────────────┘</pre>
</div>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bootloader">Bootloader</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To access the bootloader, turn off the Steam Deck.  With the power off, hold down the "Volume Down" (<code>(-)</code> button on top of the Steam Deck) and press power.  Keep holding the button until it makes a beep/chime sound.</p>
</div>
<div class="paragraph">
<p><strong>TODO</strong></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-11-21 17:58:38 -0800
</div>
</div>
</body>
</html>